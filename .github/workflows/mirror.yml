name: Sync ant-hab/Minishell
  
on:
  schedule:
    # Runs at 00:00 UTC every day
    - cron: '0 0 * * *'
  workflow_dispatch:
    # Allows manual trigger from the GitHub Actions tab

jobs:
  sync_to_portfolio:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Portfolio Repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.MINISHELL_SYNC_TOKEN }}
          fetch-depth: 0 
  
      - name: Mirror ant-hab/Minishell to umarsajidm/minishell
        run: |
          # 1. Define the source and destination URLs
          ANT_HAB_REPO="https://github.com/ant-hab/Minishell.git"
          PORTFOLIO_REPO="https://github.com/umarsajidm/minishell.git"
           
          # 2. Add Antor's repo as a temporary remote
          git remote add ant-hab $ANT_HAB_REPO
  
          # 3. Fetch all branches and tags from Antor's repo
          git fetch ant-hab --tags --force --prune
  
          # 4. Push all changes (branches and tags) to your portfolio repo
          git push --mirror $PORTFOLIO_REPO
